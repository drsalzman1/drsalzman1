<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Pinochle</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="manifest" href="manifest.json">
        <link rel="icon" href="icons/pinochle.svg">
        <link rel="stylesheet" href="styles.css">
    </head>
    <body id="docBody">
        <canvas id="docCanvas"></canvas>
        <div id="textArea">
            <div id="bidText">
                <div id="meldTable">
                    <div id="trumpColumn">
                        Trump<br>
                        <img src="suits/spade.svg" alt="Spades"><br>
                        <img src="suits/heart.svg" alt="Heart"><br>
                        <img src="suits/club.svg" alt="Clubs"><br>
                        <img src="suits/diamond.svg" alt="Diamonds">
                    </div>
                    <div id="meldColumn">
                        Meld<br>
                        <span></span><br>
                        <span></span><br>
                        <span></span><br>
                        <span></span>
                    </div>
                </div>
                <div id="bidButtons">
                    <input type="button"><input type="button"><input type="button">
                </div>
            </div>
            <div id="trumpText">
                <div><input type="button" value="Spades" onclick="spadesClicked()"></div>
                <div><input type="button" value="Hearts" onclick="heartsClicked()"></div>
                <div><input type="button" value="Clubs" onclick="clubsClicked()"></div>
                <div><input type="button" value="Diamonds" onclick="diamondsClicked()"></div>
            </div>
            <div id="playText">
                <div></div>
                <div></div>
                <div></div>
                <div id="playBtns">
                    <input id="showBtn" type="button" value="Show" onclick="showClicked()">
                    <input id="playBtn" type="button" value="Play" onclick="playClicked()">
                    <input id="tossBtn" type="button" value="Toss" onclick="tossClicked()">
                </div>
            </div>
            <div id="handText">
                <div id="handTable">
                    <div>
                        <br>
                        Old<br>
                        Bid<br>
                        Meld<br>
                        Take<br>
                        New
                    </div>
                    <div>
                        <u>Us</u><br>
                        <span id="usOld"></span><br>
                        <span id="usBid"></span><br>
                        <span id="usMeld"></span><br>
                        <u><span id="usTake"></span></u><br>
                        <span id="usNew"></span>
                    </div>
                    <div>
                        <u>Them</u><br>
                        <span id="themOld"></span><br>
                        <span id="themBid"></span><br>
                        <span id="themMeld"></span><br>
                        <u><span id="themTake"></span></u><br>
                        <span id="themNew"></span>
                    </div>
                </div>
                <div id="nextDiv">
                    <br>
                    <input type="button" value="Next" onclick="nextClicked()">
                </div>
                <div id="overDiv">
                    <br>
                    <span id="overText"></span><br>
                    <br>
                    <input type="button" value="Again" onclick="againClicked()">
                    <input type="button" value="Quit" onclick="quitClicked()">
                </div>
            </div>
        </div>
        <div id="bidBox">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
        <img id="menuIcon" src="icons/menu.svg" alt="menu" onclick="menuIconClicked()">
        <div id="menuText">
            <b>Double Deck Pinochle</b>
            <img class="closeIcon" src="icons/close.svg" alt="close" onclick="menuCloseClicked()"><br>
            <br>
            <div onclick="statsClicked()">
                <img class="menuIcon" src="icons/analytics.svg" alt="stats"> Display stats
            </div><br>
            <div onclick="revealClicked()">
                <img class="menuIcon" src="icons/settings.svg" alt="options"> <span id="revealTxt">Reveal cards</span>
            </div><br>
            <div onclick="reloadClicked()">
                <img class="menuIcon" src="icons/refresh.svg" alt="reload"> Reload app
            </div><br>
            <div onclick="tutorClicked()">
                <img class="menuIcon" src="icons/help.svg" alt="tutorial"> Show tutorial
            </div><br>
            <div onclick="aboutClicked()">
                <img class="menuIcon" src="icons/info.svg" alt="about"> Describe app
            </div><br>
            <div onclick="exitClicked()">
                <img class="menuIcon" src="icons/exit.svg" alt="exit"> Exit app
            </div><br>
        </div>
        <div id="statsText">
            <div>
                <b>Card Counts (min-max)</b>
                <img class="closeIcon" src="icons/close.svg" alt="close" onclick="statsCloseClicked()">
            </div>
            <div id="statsRow1">
                <div id="spadesT">
                    <div>
                        &spades;<br>A<br>10<br>K<br>Q<br>J
                    </div>
                    <div class="statColumn">
                        &lArr;<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                    <div class="statColumn">
                        &uArr;<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                    <div class="statColumn">
                        &rArr;<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                    <div class="statColumn">
                        &dArr;<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                    <div class="statColumn">
                        ?<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                </div>
                <div id="heartsT">
                    <div>
                        &hearts;<br>A<br>10<br>K<br>Q<br>J
                    </div>
                    <div class="statColumn">
                        &lArr;<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                    <div class="statColumn">
                        &uArr;<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                    <div class="statColumn">
                        &rArr;<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                    <div class="statColumn">
                        &dArr;<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                    <div class="statColumn">
                        ?<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                </div>
            </div>
            <div id="statsRow2">
                <div id="clubsT">
                    <div>
                        &clubs;<br>A<br>10<br>K<br>Q<br>J
                    </div>
                    <div class="statColumn">
                        &lArr;<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                    <div class="statColumn">
                        &uArr;<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                    <div class="statColumn">
                        &rArr;<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                    <div class="statColumn">
                        &dArr;<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                    <div class="statColumn">
                        ?<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                </div>
                <div id="diamondsT">
                    <div>
                        &diams;<br>A<br>10<br>K<br>Q<br>J
                    </div>
                    <div class="statColumn">
                        &lArr;<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                    <div class="statColumn">
                        &uArr;<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                    <div class="statColumn">
                        &rArr;<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                    <div class="statColumn">
                        &dArr;<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                    <div class="statColumn">
                        ?<br><div></div><div></div><div></div><div></div><div></div>
                    </div>
                </div>
            </div>
        </div>
        <div id="tutorText">
            <div>
                <b>Double Deck Pinochle - Rules</b>
                <img class="closeIcon" src="icons/close.svg" alt="close" onclick="tutorCloseClicked()"><br>
                <br>
                The players are south (you), west (left opponent), north (partner across), and east (right opponent).
                The deck has 80 cards: 4 cards of each rank (ordered ace, ten, king, queen, jack) in each suit (spades, 
                hearts, clubs, diamonds).<br>
                <br>
                The dealer, initially chosen at random, deals the entire deck.
                The player to the left of dealer must bid at least 50 or pass.
                The next player to the left must bid higher (5 higher starting at 60) or pass. 
                Bidding continues until only one bidder remains.
                If the first three players pass, the fourth player (dealer) must bid at least 50.
                The final bidder picks a trump suit (which outranks the other suits) and plays first.<br>
                <br>
                The first player may lead any card.
                The next player to the left must follow the lead suit if possible, and if the lead's not been trumped, 
                must beat the high card in the lead suit if possible.
                If they can't follow the lead, they must play trump if possible, and beat any high trump if possible.
                If they can't follow the lead or play trump, they can play any card.
                Play continues until everyone's played a card.<br>
                <br>
                The winner then collects the trick, and if any cards remain in their hand, leads the next trick. 
                When the hand is over, the player to the left of dealer deals the next hand until the game is over.
                <br>
                <img class="nextIcon" src="icons/next.svg" alt="next" onclick="tutorNextClicked()">
            </div>
            <div>
                <b>Double Deck Pinochle - Meld</b>
                <img class="closeIcon" src="icons/close.svg" alt="close" onclick="tutorCloseClicked()"><br>
                <br>
                Each player's meld comes from their hand:
                <ul><br>
                    <li>A (ace) in each suit (around):10; double:100</li>
                    <li>K (king) in each suit:8; double:80</li>
                    <li>Q (queen) in each suit:6; double:60</li>
                    <li>J (jack) in each suit:4; double:40</li>
                    <li>A, 10, K, Q, J (run) in trump:16; double:150</li>
                    <li>Q of spades, J of diamonds:4; 2x:30; 3x:90</li>
                    <li>K, Q in trump (not in run):4; double:8</li>
                    <li>K, Q (marriage) in non-trump:2; double:4</li>
                </ul><br>
                For your convenience, the app displays your meld for each possible trump suit while you're bidding.<br>
                <br>
                A team's meld is the sum of each member's meld.
                If a team's meld is less than 20, their meld is 0.<br>
                <br>
                <img class="backIcon" src="icons/back.svg" alt="back" onclick="tutorBackClicked()">
                <img class="nextIcon" src="icons/next.svg" alt="next" onclick="tutorNextClicked()">
            </div>
            <div>
                <b>Double Deck Pinochle - Scoring</b>
                <img class="closeIcon" src="icons/close.svg" alt="close" onclick="tutorCloseClicked()"><br>
                <br>
                After bidding, each player reveals their meld.
                Even if a player's team melds less than 20, the player must reveal if they have aces around.
                If a player wins the bid without a run or marriage in trump, they can't play (must toss) the hand.
                The bid winner may also choose to toss a hand.<br>
                <br>
                After each hand, each team counts their take.
                Each ace, ten and king is worth 1.
                Taking the last trick is worth 2.
                If a team's take is less than 20, their take is 0.<br>                 
                <br>
                Normally, each team's score increases by their meld plus take.
                However, if the bid-winning team's meld plus take is less than their bid, their score decreases by their bid.
                The first team to reach 500, wins.
                If both teams reach 500, the bid-winning team wins.<br>
                <br>
                <img class="backIcon" src="icons/back.svg" alt="back" onclick="tutorBackClicked()">
                <img class="nextIcon" src="icons/next.svg" alt="next" onclick="tutorNextClicked()">
            </div>
            <div>
                <b>Double Deck Pinochle - Communicating</b>
                <img class="closeIcon" src="icons/close.svg" alt="close" onclick="tutorCloseClicked()"><br>
                <br>
                You're not allowed to directly communicate your cards or your strategy to your partner.
                This is called talking across the table.
                However, you can reveal certain information by the way you bid and play.<br>
                <br>
                This app uses jump bids.
                The app assumes you have typical meld (currently 14).
                If you start the bid at 52 or increase the bid by 2, the app assumes you have a marriage and 20 meld.
                If you start the bid at 53 or increase the bid by 3, the app assumes you have a marriage and 30 meld, etc.<br>
                <br>
                This app ignores indicators.
                If you play an ace on your partner's ace, the app assumes nothing.
                If you play a jack on your partner's ace, the app assumes nothing.<br>
                <br>
                This app offers a menu option to reveal everyone's cards.
                This allows you to <del>cheat</del> learn, but this app doesn't exploit the open hands.<br>
                <br>
                <img class="backIcon" src="icons/back.svg" alt="back" onclick="tutorBackClicked()">
                <img class="nextIcon" src="icons/next.svg" alt="next" onclick="tutorNextClicked()">
            </div>
            <div>
                <b>Double Deck Pinochle - Strategy</b>
                <img class="closeIcon" src="icons/close.svg" alt="close" onclick="tutorCloseClicked()"><br>
                <br>
                This app bids up to a limit based on its meld, its estimate of your meld (perhaps based on your jump bid),
                and its estimate of the strength of its playing hand.<br>
                <br>
                This app counts the cards that each player reveals as meld.
                For example, if you reveal a king of clubs but no queen of clubs, it knows you don't have any queens of clubs.
                This app also counts the cards that each player reveals during play.
                For example, if you play a jack of clubs on a king of clubs, it knows you don't have a ten or ace of clubs.
                This app offers a menu option to display such stats from your perspective without cheating.<br>
                <br>
                If the app estimates that its team can win the trick, it plays the card that it estimates will
                take the trick, 
                take the most points, 
                spend the fewest of its team's high and trump cards, and
                waste the most of its opponents' high and trump cards.
                If the app estimates that its team will lose the trick, it plays the card that it estimates will
                lose the fewest points, 
                waste the fewest of its team's high and trump cards, and
                waste the most of its opponents' high and trump cards.<br>
                <br>
                <img class="backIcon" src="icons/back.svg" alt="back" onclick="tutorBackClicked()">
                <img class="nextIcon" src="icons/next.svg" alt="next" onclick="tutorNextClicked()">
            </div>
            <div>
                <b>Double Deck Pinochle - Glossary</b>
                <img class="closeIcon" src="icons/close.svg" alt="close" onclick="tutorCloseClicked()"><br>
                <br>
                <ul>
                    <li>players: south (you), west, north and east</li>
                    <li>teams: us (south, north) vs. them (east, west)</li>
                    <li>suit: spades, hearts, clubs, diamonds</li>
                    <li>rank: ace, ten, king, queen, jack (in that order)</li>
                    <li>deck: 80 cards - 4 of each rank in each suit</li>
                    <li>bid: compete for right to pick trump and lead</li>
                    <li>pass: withdraw from bidding</li>
                    <li>trump: the suit that outranks the other suits</li>
                    <li>play: place a card on the table</li>
                    <li>lead: the first card played</li>
                    <li>trick: the set of four played cards</li>
                    <li>meld: valuable sets of cards in a player's hand</li>
                    <li>around: one specific rank in each suit</li>
                    <li>marriage: king and queen in a suit</li>
                    <li>run: one of each rank in a suit</li>
                    <li>pinochle: queen of spades & jack of diamonds</li>
                    <li>take: points earned by the trick winner</li>
                    <li>toss: decide to not play a hand</li>
                </ul>
                <img class="backIcon" src="icons/back.svg" alt="back" onclick="tutorBackClicked()">
            </div>
        </div>
        <div id="aboutText">
            <b>Double Deck Pinochle v0.4</b>
            <br>
            <img class="closeIcon" src="icons/close.svg" alt="close" onclick="aboutCloseClicked()"><br>
            This app was written by David Salzman based on the Salzman house rules.
            You're welcome to enjoy this game, but not to reproduce it or modify it in any manner.<br>
            <br>
            If you have any comments or suggestions, please email me at salzman.apps@gmail.com.<br>
            <br>
            &copy; 2025 David Salzman
        </div>
        <div id="cardSize">
        </div>
    </body>
    <script src="scripts.js" defer></script>
    <script>
        if ("serviceWorker" in navigator && window.location.origin != "file://") {
            navigator.serviceWorker.register("service-worker.js");
        }
    </script>  
</html>